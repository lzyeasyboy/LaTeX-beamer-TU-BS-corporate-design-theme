% Copyright 2007 by Marco Barisione
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.

\mode<presentation>

% Use alternative title page style.
\DeclareOptionBeamer{alternativetitlepage}[true]{\def\beamer@tubs@alternativetitlepage{#1}}

% Logo to use in the alternative title page.
\def\beamer@tubs@titlepagelogo{}
\DeclareOptionBeamer{titlepagelogo}{\def\beamer@tubs@titlepagelogo{#1}}

% Bullet shape.
\DeclareOptionBeamer{bullet}{\def\beamer@tubs@bullet{#1}}

\ExecuteOptionsBeamer{alternativetitlepage=false,bullet=square}
\ProcessOptionsBeamer

% Colors.
\setbeamercolor*{title page bottom}{parent=palette primary}
\setbeamercolor*{title page header}{parent=palette secondary}
\setbeamercolor*{title page text}{parent=palette tertiary}

% gauss
\newlength{\beamer@tubs@gaussmargin}
\setlength{\beamer@tubs@gaussmargin}{.03\paperwidth}
\newlength{\beamer@tubs@gaussheight}
\setlength{\beamer@tubs@gaussheight}{.75\paperheight}
\newlength{\beamer@tubs@gausswidth}
\setlength{\beamer@tubs@gausswidth}{.94\paperwidth}

\newlength{\beamer@tubs@gausstopfrst}
\setlength{\beamer@tubs@gausstopfrst}{.52\beamer@tubs@gaussheight}
\newlength{\beamer@tubs@gausstopscnd}
\setlength{\beamer@tubs@gausstopscnd}{.48\beamer@tubs@gaussheight}

\newlength{\beamer@tubs@logoheight}
\setlength{\beamer@tubs@logoheight}{.14\paperheight}

\newlength{\beamer@tubs@topmargin}
\setlength{\beamer@tubs@topmargin}{.21\paperheight}

\newlength{\beamer@tubs@logovskip}
\setlength{\beamer@tubs@logovskip}{.75\beamer@tubs@logoheight}
\addtolength{\beamer@tubs@logovskip}{\beamer@tubs@gaussheight}


% Margins.
\newlength{\beamer@tubs@normalmargin}
\setlength{\beamer@tubs@normalmargin}{.06\paperwidth}
\setbeamersize{text margin left=\beamer@tubs@normalmargin}
\setbeamersize{text margin right=\beamer@tubs@normalmargin}
\setlength\leftmargini{.6\beamer@tubs@normalmargin}
\setlength\leftmarginii{.6\beamer@tubs@normalmargin}
\setlength\leftmarginiii{.6\beamer@tubs@normalmargin}

% Normal title page.
\defbeamertemplate*{title page normal}{tubs theme}[1][]
{}

% Alternative title page, you should use this in a frame with the [plain]
% option.
\defbeamertemplate*{title page alternative}{tubs theme}[1][]
{
  {\parskip0pt\offinterlineskip%
  \hbox{\hskip-\Gm@lmargin\hbox{\vbox{%
  \@tempdima=\textwidth\textwidth=\paperwidth\hsize=\textwidth\def\\{,}\vbox{}\vskip-1.5ex%
  	\vbox{}\vskip\beamer@tubs@topmargin

	\hbox{}\hskip\beamer@tubs@gaussmargin
	\vbox{
    % Title.
	 \begin{beamercolorbox}[wd=\beamer@tubs@gausswidth,ht=\beamer@tubs@gausstopfrst]{title page header}
    \end{beamercolorbox}%

	 \begin{beamercolorbox}[wd=\beamer@tubs@gausswidth,ht=\beamer@tubs@gausstopscnd,leftskip=\beamer@tubs@normalmargin,sep=\beamer@tubs@gaussmargin]{title page text}
		 \usebeamerfont{title}\inserttitle\par%
       \ifx\insertsubtitle\@empty%
       \else%
         \vskip0.25em%
         {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
       \fi%  
      \vspace{1em}%
	 \end{beamercolorbox}

	 \vbox{}\vskip-\beamer@tubs@gaussmargin%

    % First line.
    \begin{beamercolorbox}[wd=\beamer@tubs@gausswidth,ht=\beamer@tubs@gaussmargin,dp=0pt]{title page bottom}%
    \end{beamercolorbox}%
	}

	\vbox{}\vskip-\beamer@tubs@logovskip
	\includegraphics[height=\beamer@tubs@logoheight]{\beamer@tubs@titlepagelogo}
    
    \vskip0pt%
  }}%
  \hskip-\Gm@rmargin%
  }}\hfill%

}

\defbeamertemplate*{title page}{tubs}[1][]
{
  \def\beamer@tubs@truetext{true}%
  \ifx\beamer@tubs@alternativetitlepage\beamer@tubs@truetext%
    \usebeamertemplate{title page alternative}%
  \else%
    \usebeamertemplate{title page normal}%
  \fi%
}

% Items.
\defbeamertemplate{itemize item}{squarealt}%
{\tiny\raise.5ex\hbox{\donotcoloroutermaths$\blacksquare$}}
\defbeamertemplate{itemize subitem}{squarealt}%
{\tiny\raise.4ex\hbox{\donotcoloroutermaths$\square$}}
\defbeamertemplate{itemize subsubitem}{squarealt}%
{\tiny\raise.3ex\hbox{\donotcoloroutermaths$\blacksquare$}}

\defbeamertemplate{itemize item}{circlealt}%
{\small\raise.2ex\hbox{\donotcoloroutermaths$\bullet$}}
\defbeamertemplate{itemize subitem}{circlealt}%
{\small\raise.1ex\hbox{\donotcoloroutermaths$\circ$}}
\defbeamertemplate{itemize subsubitem}{circlealt}%
{\scriptsize\raise.1ex\hbox{\donotcoloroutermaths$\bullet$}}

\def\circletext{circle}
\ifx\beamer@tubs@bullet\circletext
  \setbeamertemplate{items}[circlealt]
\else
  \setbeamertemplate{items}[squarealt]
\fi

\mode<all>

